<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Braden Bradshaw</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">

  <!-- Container -->
  <div id="main-container" class="max-w-4xl mx-auto mt-10 p-6 bg-white rounded-2xl shadow-lg transition-all duration-300 ease-in-out">

    <!-- Navigation Tabs -->
    <nav class="flex space-x-6 border-b pb-4 mb-6">
      <button class="tab-link font-semibold text-gray-700 hover:text-black" onclick="showTab('home')">Home</button>
      <button class="tab-link font-semibold text-gray-700 hover:text-black" onclick="showTab('portfolio')">Portfolio</button>
      <button class="tab-link font-semibold text-gray-700 hover:text-black" onclick="showTab('cv')">CV</button>
    </nav>

    <!-- HOME Tab -->
    <div id="tab-home" class="tab-content transition-opacity duration-300 ease-in-out opacity-0 hidden">
      <section class="mb-6">
        <h1 class="text-2xl font-bold mb-2">Hi, Iâ€™m Braden ðŸ‘‹</h1>
        <p class="text-gray-700 text-md">
          Iâ€™m a research-driven data scientist with a background in behavioral science and a passion for uncovering
          patterns in customer behavior. This assistant can answer questions about my experience, work, or background.
        </p>
      </section>

      <!-- Chat Interface -->
      <section class="mt-8">
        <h2 class="text-xl font-semibold mb-2">Ask Me Anything</h2>
        <div id="chat-log" class="h-64 overflow-y-auto mb-4 p-4 bg-gray-50 rounded-md shadow-inner text-sm"></div>
        <div class="flex space-x-2">
          <input id="user-input" type="text" placeholder="Ask a question..." class="flex-1 px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring focus:border-blue-300">
          <button onclick="sendMessage()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">Send</button>
        </div>
      </section>
    </div>

<!-- PORTFOLIO Tab -->
<div id="tab-portfolio" class="tab-content transition-opacity duration-300 ease-in-out opacity-0 hidden">
  <h2 class="text-xl font-semibold mb-4">My Projects</h2>
  <div class="grid grid-cols-1 gap-4">
    <!-- Project 1 Card -->
    <div class="p-4 border rounded-md bg-gray-50 cursor-pointer hover:bg-gray-100 transition" onclick="showProject('project1-detail')">
      <h3 class="font-semibold text-lg">Sales Funnel Attribution Model</h3>
      <p class="text-sm text-gray-600">Multi-touch attribution across web, CRM, and transactional data</p>
    </div>

    <!-- Project 2 Card -->
    <div class="p-4 border rounded-md bg-gray-50 cursor-pointer hover:bg-gray-100 transition" onclick="showProject('project2-detail')">
      <h3 class="font-semibold text-lg">Customer Retention Analysis</h3>
      <p class="text-sm text-gray-600">Longitudinal modeling of churn and retention over time</p>
    </div>
  </div>
</div>

<!-- Project 1 Detail -->
<div id="project1-detail" class="tab-content hidden">
  <button onclick="hideProject('project1-detail')" class="mb-4 text-blue-600 hover:underline">&larr; Back to Portfolio</button>
  <h2 class="text-2xl font-bold mb-2">Sales Funnel Attribution Model</h2>
  <p class="text-gray-700 mb-4">
    I developed a custom multi-touch attribution model that integrates Google Analytics, CRM (Salesforce), and transaction data to quantify the influence of marketing channels across the full funnel.
  </p>
  <img src="https://via.placeholder.com/800x400?text=Attribution+Model+Graph" alt="Attribution Model Graph" class="rounded-md mb-4 w-full">
  <ul class="list-disc list-inside text-gray-700">
    <li>Unified tracking across web, CRM, and sales platforms</li>
    <li>Used logistic regression to estimate conversion probabilities</li>
    <li>Delivered weekly dashboards in Sigma for marketing leadership</li>
  </ul>
</div>

<!-- Project 2 Detail -->
<div id="project2-detail" class="tab-content hidden">
  <button onclick="hideProject('project2-detail')" class="mb-4 text-blue-600 hover:underline">&larr; Back to Portfolio</button>
  <h2 class="text-2xl font-bold mb-2">Customer Retention Analysis</h2>
  <p class="text-gray-700 mb-4">
    I analyzed retention trends using a cohort-based approach, applying time-series methods and survival curves to understand dropoff patterns and what drives loyalty.
  </p>
  <img src="https://via.placeholder.com/800x400?text=Retention+Curve" alt="Retention Curve" class="rounded-md mb-4 w-full">
  <ul class="list-disc list-inside text-gray-700">
    <li>Segmented customers by acquisition source and engagement patterns</li>
    <li>Applied Kaplan-Meier survival analysis for churn estimation</li>
    <li>Informed new re-engagement strategies and product tweaks</li>
  </ul>
</div>


    <!-- CV Tab (wider + taller iframe) -->
    <div id="tab-cv" class="tab-content transition-opacity duration-300 ease-in-out opacity-0 hidden">
      <h2 class="text-xl font-semibold mb-4">Curriculum Vitae</h2>
      <p class="mb-4">You can view or download my full CV below.</p>
      <iframe src="resume.pdf" class="w-full h-[85vh] border rounded-md"></iframe>
    </div>

  </div>

  <!-- JavaScript -->
<script>
  async function sendMessage() {
    const input = document.getElementById('user-input');
    const message = input.value.trim();
    if (!message) return;

    const log = document.getElementById('chat-log');
    log.innerHTML += `<div class="mb-2"><strong>You:</strong> ${message}</div>`;
    input.value = '';

    try {
      const response = await fetch('https://resume-chat-backend.onrender.com/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: message })
      });

      const data = await response.json();
      log.innerHTML += `<div class="mb-2"><strong>AI:</strong> ${data.response}</div>`;
      log.scrollTop = log.scrollHeight;
    } catch (err) {
      log.innerHTML += `<div class="text-red-500"><em>Error contacting server.</em></div>`;
    }
  }

  function hideAllTabs() {
    document.querySelectorAll('.tab-content').forEach(el => {
      el.classList.add('opacity-0');
      el.classList.remove('pointer-events-auto');
      el.classList.add('pointer-events-none');
    });

    setTimeout(() => {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
    }, 300);
  }

  function showTab(tabId) {
    hideAllTabs();

    setTimeout(() => {
      const target = document.getElementById('tab-' + tabId);
      if (!target) return;
      target.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
      target.classList.add('pointer-events-auto');
    }, 310);
  }

      function showTab(tabId) {
      // Shrink or expand container if viewing CV
      const container = document.getElementById('main-container');
      if (tabId === 'cv') {
        container.classList.remove('max-w-4xl');
        container.classList.add('max-w-7xl');
      } else {
        container.classList.remove('max-w-7xl');
        container.classList.add('max-w-4xl');
      }

  function showProject(projectId) {
    hideAllTabs();

    setTimeout(() => {
      const detail = document.getElementById(projectId);
      if (!detail) return;
      detail.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
      detail.classList.add('pointer-events-auto');
    }, 310);
  }

  function hideProject(projectId) {
    const detail = document.getElementById(projectId);
    if (!detail) return;

    detail.classList.add('opacity-0');
    detail.classList.remove('pointer-events-auto');
    detail.classList.add('pointer-events-none');

    setTimeout(() => {
      detail.classList.add('hidden');
      showTab('portfolio');
    }, 300);
  }

  window.onload = () => showTab('home');
</script>

</body>
</html>
